<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotto</title>
</head>

<body>
    <h1>
        1~45까지의 중복되지 않는 숫자 6개를 랜덤으로 추출 => 출력
        set 객체를 사용하여 생성
    </h1>

    <button id="genRanNum">랜덤번호 6개 생성 (출력)</button>

    <h1 id="printNum1"></h1>

    <button id="genWinNum">당첨번호 7개 출력 (마지막 번호는 보너스번호) (출력)</button>

    <h1 id="printNum2"></h1>

    <button id="resultBtn">결과확인</button>

    <h1 id="printResult"></h1>

    <script>
        // html 태그 가져오기
        let printNum1 = document.getElementById("printNum1");
        let printNum2 = document.getElementById("printNum2");
        let printResult = document.getElementById("printResult");

        let lottoNum;   // 로또 번호
        let winNum;     // 당첨 번호
        let bonusNum = 0;           // 보너스 번호  

        // 내 로또번호 생성 6자리
        document.getElementById("genRanNum").addEventListener("click", function () {
            let str = "";   // 출력을 위한 변수

            lottoNum = new Set();   // 로또 번호를 Set으로 선언

            // 랜덤 번호 6개 생성 후 lottoNum 변수에 저장
            for (let i = 0; lottoNum.size < 6; i++) {
                lottoNum.add(Math.floor((Math.random() * 45) + 1));
            };

            // set을 array로
            lottoNum = Array.from(lottoNum);

            // 배열 정렬
            arraySort(lottoNum);

            // 출력을 위해 lottoNum_arr 값들을 str변수에 대입
            lottoNum.forEach(function (v) {
                str += `${v} `
            });

            // 출력
            printNum1.innerHTML = str;
        });

        document.getElementById("genWinNum").addEventListener("click", function () {
            let str = '';       // 출력을 위한 변수

            winNum = new Set();     // 당첨 번호를 set으로

            // winNum set 변수에 랜덤값
            for (let i = 0; winNum.size < 7; i++) {
                winNum.add(Math.floor((Math.random() * 45) + 1));
            };

            // winNum set 변수의 마지막 값을 보너스 번호로 추출 후 해당 값 삭제
            winNum.forEach(function (v) {
                bonusNum = v;
            });
            winNum.delete(bonusNum);

            // set을 array로
            winNum = Array.from(winNum);

            // winNum_arr 배열 정렬
            arraySort(winNum);

            // 출력을 위해 str 변수 winNum_arr 배열 값들 저장
            winNum.forEach(function (v) {
                str += `${v} `
            });

            // 보너스번호 출력
            str += `(보너스번호: ${bonusNum})`;

            // 출력
            printNum2.innerHTML = str;
        });

        document.getElementById("resultBtn").addEventListener("click", function () {
            let bonusCheck = false;
            let winCnt = 0;
            let str = '';

            for (let i = 0; i < 6; i++) {
                for (let j = 0; j < 6; j++) {
                    if (lottoNum[i] == winNum[j])
                        winCnt++;
                }

                if (lottoNum[i] == bonusNum)
                    bonusCheck = true;
            }

            console.log(winCnt);

            switch (winCnt) {
                case 6:
                    str = "1등";
                    break;
                case 5:
                    if (bonusCheck == true)
                        str = "2등";
                    else
                        str = "3등";
                    break;
                case 4:
                    str = "4등";
                    break;
                case 3:
                    str = "5등";
                    break;
                default:
                    str = "꼴등";
                    break;
            }

            printResult.innerText = str;
        });

        function arraySort(arr) {
            arr.sort(function (a, b) {
                return a - b;
            });
        }
    </script>
</body>

</html>